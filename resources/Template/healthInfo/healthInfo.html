{% extends "common/common.html" %}

{% block css %}
<link rel="stylesheet" type="text/css" href="Template/healthInfo/healthInfo.css"/>
{% endblock %}

{% block main %}
<div class="container">
    <!-- 背景图片 -->
    <img class="bg-image" src="imgs/others/loading13.png" alt="" />
    
    <!-- 头部区域 -->
    <div class="header">
        <div class="header-left">
            <img class="game-logo" src="imgs/others/logo.png" alt="三角洲行动" />
        </div>
        <div class="header-center">
            <div class="title">健康状态信息</div>
        </div>
    </div>

    <div class="content">
            <div class="content-layout">
                <!-- 左侧：负面状态 -->
                {% if deBuffList and deBuffList | length > 0 %}
                <div class="left-section">
                    <div class="section-title debuff-title">负面状态</div>
                    <div class="section-content">
                        <div class="status-list">
                            {% for areaGroup in deBuffList %}
                            {% if areaGroup.isMerged %}
                            <!-- 合并的卡片：同一部位的两个状态 -->
                            <div class="status-card debuff-card merged-card">
                                <div class="area-badge">{{ areaGroup.area | default('未知部位') }}</div>
                                <div class="merged-status-container">
                                    {% for status in areaGroup.list %}
                                    <div class="merged-status-item">
                                        <div class="status-header">
                                            {% if status.pic %}
                                            <div class="status-icon-wrapper">
                                                <img class="status-icon" src="{{ status.pic }}" alt="{{ status.title | default(status.status) | default('未知状态') }}" onerror="this.style.display='none';" />
                                            </div>
                                            {% endif %}
                                            <div class="status-name">{{ status.title | default(status.status) | default('未知状态') }}</div>
                                        </div>
                                        {% if status.trigger %}
                                        <div class="status-info">
                                            <span class="info-label">触发：</span>
                                            <span class="info-value">{{ status.trigger }}</span>
                                        </div>
                                        {% endif %}
                                        {% if status.effect %}
                                        <div class="status-info">
                                            <span class="info-label">效果：</span>
                                            <span class="info-value">{{ status.effect }}</span>
                                        </div>
                                        {% endif %}
                                    </div>
                                    {% if not loop.last %}
                                    <div class="merged-divider"></div>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                            {% else %}
                            <!-- 单个状态卡片 -->
                            {% for status in areaGroup.list %}
                            <div class="status-card debuff-card">
                                <div class="area-badge">{{ areaGroup.area | default('未知部位') }}</div>
                                <div class="status-header">
                                    {% if status.pic %}
                                    <div class="status-icon-wrapper">
                                        <img class="status-icon" src="{{ status.pic }}" alt="{{ status.title | default(status.status) | default('未知状态') }}" onerror="this.style.display='none';" />
                                    </div>
                                    {% endif %}
                                    <div class="status-name">{{ status.title | default(status.status) | default('未知状态') }}</div>
                                </div>
                                {% if status.trigger %}
                                <div class="status-info">
                                    <span class="info-label">触发：</span>
                                    <span class="info-value">{{ status.trigger }}</span>
                                </div>
                                {% endif %}
                                {% if status.effect %}
                                <div class="status-info">
                                    <span class="info-label">效果：</span>
                                    <span class="info-value">{{ status.effect }}</span>
                                </div>
                                {% endif %}
                            </div>
                            {% endfor %}
                            {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- 右侧：增益状态 -->
                {% if buffList and buffList | length > 0 %}
                <div class="right-section">
                    <div class="section-title buff-title">增益状态</div>
                    <div class="section-content">
                        <div class="status-list">
                            {% for buffGroup in buffList %}
                            {% for buff in buffGroup.list %}
                            <div class="status-card buff-card">
                                <div class="status-header">
                                    {% if buff.pic %}
                                    <div class="status-icon-wrapper">
                                        <img class="status-icon" src="{{ buff.pic }}" alt="{{ buff.title | default('未知增益') }}" onerror="this.style.display='none';" />
                                    </div>
                                    {% endif %}
                                    <div class="status-name">{{ buff.title | default('未知增益') }}</div>
                                </div>
                                {% if buff.effect %}
                                <div class="status-info">
                                    <span class="info-label">效果：</span>
                                    <span class="info-value">{{ buff.effect }}</span>
                                </div>
                                {% endif %}
                            </div>
                            {% endfor %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
    </div>
</div>
{% endblock %}
