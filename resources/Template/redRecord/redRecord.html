{% extends "common/common.html" %}

{% block css %}
<link rel="stylesheet" type="text/css" href="Template/redRecord/redRecord.css"/>
{% endblock %}

{% block main %}
<div class="red-record-container">
    <!-- 整体背景图片 -->
    <img class="bg-overlay" src="{{_res_path}}imgs/redCollection/bg.webp" />
    
    <!-- ========== 头部区域 ========== -->
    <div class="user-header">
        <div class="game-meta">
            <img class="game-logo" src="{{_res_path}}imgs/others/logo.png" alt="三角洲行动" />
        </div>
        <div class="user-profile">
            <div class="avatar-wrapper">
                <img class="avatar" src="{{ userAvatar }}" data-qq-avatar="{{ qqAvatarUrl }}" onerror="if(this.dataset.qqAvatar){this.src=this.dataset.qqAvatar;this.onerror=null;}else{this.style.display='none';}" />
            </div>
            <div class="user-meta">
                <div class="nickname">{{ userName }}</div>
                <div class="rank-tag">
                    <span class="rank-text">{{ userRank }}</span>
                    {% if userRankImage %}
                    <img class="rank-icon" src="{{ userRankImage }}" alt="{{ userRank }}" onerror="this.style.display='none';" />
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- ========== 物品详细展示区域 ========== -->
    <div class="section-block item-display-card">
        <div class="section-header">
            <span class="dot"></span> 物品详情 / ITEM DETAILS
        </div>
        
        <div class="item-title-box">
            <h1 class="item-name-text">{{ itemName }}</h1>
            {% if itemType %}
            <span class="item-type-tag">{{ itemType }}</span>
            {% endif %}
        </div>

        <div class="item-details-flex">
            <!-- 左侧：物品图片 -->
            <div class="item-img-container">
                <img class="item-main-img" src="{{ itemImageUrl }}" onerror="this.style.display='none'" />
            </div>
            
            <!-- 右侧：解锁数据 -->
            <div class="unlock-data-panel">
                <div class="data-row highlight">
                    <span class="label">首次解锁 / FIRST UNLOCK</span>
                    <span class="value">{{ firstUnlockTime }}</span>
                </div>
        
                {% if firstUnlockMapBg %}
                <div class="map-box">
                    <img class="map-thumbnail" src="{{ firstUnlockMapBg }}" onerror="this.style.display='none'" />
                </div>
                {% endif %}
        
                <div class="data-row">
                    <span class="label">解锁地点 / UNLOCK LOCATION</span>
                    <span class="value">{{ firstUnlockMap }}</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ========== 历史记录区域 ========== -->
    <div class="section-block records-container">
        <div class="records-header">
            <div class="records-title">出红记录 / RED RECORDS</div>
            {% if recordCount > 0 %}
            <div class="records-badge">{{ recordCount }}</div>
            {% endif %}
        </div>
        
        <div class="records-content">
            {% if records and records | length > 0 %}
                {% for record in records %}
                <div class="record-entry">
                    <div class="entry-index">{{ loop.index }}</div>
                    <div class="entry-data">
                        <div class="entry-row">
                            <span class="entry-label">出红时间 / TIME</span>
                            <span class="entry-value">{{ record.time }}</span>
                        </div>
                        <div class="entry-row">
                            <span class="entry-label">出红地点 / LOCATION</span>
                            <span class="entry-value">{{ record.map }}</span>
                        </div>
                        {% if record.count %}
                        <div class="entry-row">
                            <span class="entry-label">数量 / COUNT</span>
                            <span class="entry-value">{{ record.count }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-data">暂无出红记录</div>
            {% endif %}
        </div>
    </div>
    
    <!-- 页脚 -->
    <div class="template-footer">
        <div class="copyright-text">由 DeltaForce-Plugin-Yunzai 强力驱动</div>
    </div>
</div>
{% endblock %}
{% block footer %}{% endblock %}

